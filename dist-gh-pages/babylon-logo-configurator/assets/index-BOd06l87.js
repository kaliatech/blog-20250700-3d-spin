import{r as u,j as t,B as w,I as H,T as A,P as Q,C as U,a as $,b as z,S as W,F as I,c as L,D as X,d as O,e as V}from"./vendor-DuMzqJlV.js";import{P as f,C as x,a as b,E as q,S as K,b as Y,G as J,A as Z,T as v,V as E,H as ee,L as oe,Q as te}from"./vendor_babylonjs-CXKqtQaF.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();const B=0,P=1,k=2,F=3,m={r:7,g:7,b:7,a:1},_={r:245,g:5,b:5,a:.3},C={r:0,g:234,b:226,a:1},D=1,T=1.51;function y(s,o,a){s.albedoColor=o,s.emissiveColor=o,s.alpha=a,a<.99?(s.alphaMode=b.ALPHA_COMBINE,s.transparencyMode=b.ALPHA_COMBINE,s.backFaceCulling=!1):(s.alphaMode=b.ALPHA_DISABLE,s.transparencyMode=b.ALPHA_DISABLE,s.backFaceCulling=!1)}function se(s){const o=s.getChildMeshes(),a=o[B];if(a&&a.material instanceof f){const n=new x(m.r/255,m.g/255,m.b/255);y(a.material,n,m.a)}const r=o[P];if(r&&r.material instanceof f){const n=new x(_.r/255,_.g/255,_.b/255),l=r.material;y(r.material,n,_.a);const h=o[F];h&&h.material instanceof f&&(h.material=l)}const e=o[k];if(e&&e.material instanceof f){const n=new x(C.r/255,C.g/255,C.b/255);y(e.material,n,C.a)}}const R=2e3,ne="https://kaliatech.github.io/blog-20250700-3d-spin/babylon-prebuilt-viewer/ao-logo-3d-007.glb";class re{constructor(o){this._canvasEl=o}_engine=null;_logoMesh=null;_glLayer=null;_spinSpeed=1;_glowIntensity=3;_lastPointerDown=Date.now()-R;init(o,a){this._spinSpeed=o,this._glowIntensity=a;const r=new q(this._canvasEl,!0,{alpha:!0},!0);this._engine=r,window.addEventListener("resize",()=>{r.resize()});const e=new K(r);e.createDefaultEnvironment({createGround:!1,createSkybox:!1}),e.clearColor=new Y(0,0,0,0);const n=new J("glow",e);n.intensity=a,this._glLayer=n;const l=new Z("Camera",v.ToRadians(90),v.ToRadians(90),2.2,new E(-.2,0,0),e);l.wheelDeltaPercentage=.01,l.attachControl(!0),new ee("light",new E(0,1,0),e),oe(ne,e).then(i=>{if(i.meshes.length<1)throw new Error("No meshes found in the assset container.");this._logoMesh=i.meshes[0],se(this._logoMesh),i.addAllToScene()}),e.onPointerDown=()=>{this._lastPointerDown=Date.now()};let h=performance.now();return r.runRenderLoop(()=>{const i=performance.now(),S=(i-h)/1e3;if(h=i,e.render(),this._logoMesh&&Date.now()-this._lastPointerDown>R){const g=te.RotationAxis(E.Up(),this._spinSpeed*S),p=this._logoMesh;p.position.x=.2,p.rotationQuaternion=p.rotationQuaternion?p.rotationQuaternion.multiply(g):g}}),e}dispose(){this._engine?.dispose()}updateGlowLayerIntensity(o){this._glowIntensity=o,this._glLayer&&(this._glLayer.intensity=this._glowIntensity)}updateSpinSpeed(o){this._spinSpeed=o}updateMaterialColor(o,a){if(!this._logoMesh)return;let r=[];switch(o){case"color1":r=[this._logoMesh.getChildMeshes()[B]];break;case"color2":r=[this._logoMesh.getChildMeshes()[P],this._logoMesh.getChildMeshes()[F]];break;case"color3":r=[this._logoMesh.getChildMeshes()[k]];break}const e=new x(a.r/255,a.g/255,a.b/255);for(const n of r){const l=n.material;if(!l||!(l instanceof f)){console.warn(`No valid material found for control ID: ${o}`);return}y(l,e,a.a===void 0?1:a.a)}}}const ae="_colorControl_3odj7_1",le="_colorButton_3odj7_9",ie="_colorLabel_3odj7_23",M={colorControl:ae,colorButton:le,colorLabel:ie};function N({color:s,label:o,onChange:a}){const[r,e]=u.useState(null),n=i=>{e(i.currentTarget)},l=()=>{e(null)},h=i=>{a(i.rgb)};return t.jsxs(w,{className:M.colorControl,children:[t.jsx(H,{onClick:n,className:M.colorButton,style:{backgroundColor:s?`rgb(${s.r}, ${s.g}, ${s.b})`:"#fff",opacity:Math.max(.1,s.a??1)}}),t.jsx(A,{variant:"caption",color:"text.secondary",className:M.colorLabel,children:o}),t.jsx(Q,{open:!!r,anchorEl:r,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:t.jsx(U,{color:s,onChange:h})})]})}function ce(){const s=u.useRef(null),o=u.useRef(null),[a,r]=u.useState(m),[e,n]=u.useState(_),[l,h]=u.useState(C),[i,S]=u.useState(D),[g,p]=u.useState(T),j=(c,d)=>{switch(d){case"color1":r(c);break;case"color2":n(c);break;case"color3":h(c);break;default:console.warn(`Unknown color control ID: ${d}`);return}o.current&&o.current.updateMaterialColor(d,c)};return u.useEffect(()=>{if(s.current)return o.current||(o.current=new re(s.current),o.current.init(D,T)),()=>{}},[]),t.jsxs(t.Fragment,{children:[t.jsx($,{}),t.jsxs(w,{className:"app-container",children:[t.jsx(w,{className:"viewer-panel",children:t.jsx("canvas",{id:"bjsCanvas",ref:s})}),t.jsxs(z,{elevation:3,className:"config-panel",children:[t.jsx(A,{variant:"h6",className:"config-title",children:"Logo Configurator"}),t.jsxs(W,{spacing:2,children:[t.jsxs(I,{children:[t.jsx(L,{sx:{mb:1,fontWeight:500},children:"Colors"}),t.jsxs(w,{className:"color-controls",children:[t.jsx(N,{color:a,label:"Color 1",onChange:c=>j(c,"color1")}),t.jsx(N,{color:e,label:"Color 2",onChange:c=>j(c,"color2")}),t.jsx(N,{color:l,label:"Color 3",onChange:c=>j(c,"color3")})]})]}),t.jsx(X,{}),t.jsxs(I,{children:[t.jsxs(L,{sx:{mb:1,fontWeight:500},children:["Spin Speed: ",i]}),t.jsx(O,{value:i,onChange:(c,d)=>{o.current?.updateSpinSpeed(d),S(d)},min:0,max:10,step:.1,valueLabelDisplay:"auto"})]}),t.jsxs(I,{children:[t.jsxs(L,{sx:{mb:1,fontWeight:500},children:["Glow Intensity: ",g]}),t.jsx(O,{value:g,onChange:(c,d)=>{o.current?.updateGlowLayerIntensity(d),p(d)},min:0,max:3,step:.1,marks:!0,valueLabelDisplay:"auto"})]})]})]})]})]})}const G=document.getElementById("root");G?.addEventListener("wheel",s=>{s.preventDefault()},{passive:!1});V.createRoot(G).render(t.jsx(u.StrictMode,{children:t.jsx(ce,{})}));
