import{r as u,j as t,B as w,I as G,T as A,P as H,C as Q,a as U,b as $,S as z,F as I,c as L,D as W,d as O,e as X}from"./vendor-DuMzqJlV.js";import{P as f,C as x,a as b,E as V,S as q,b as K,G as Y,A as J,T as D,V as M,H as Z,L as ee,Q as oe}from"./vendor_babylonjs-CXKqtQaF.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}})();const B=0,P=1,k=2,F=3,m={r:7,g:7,b:7,a:1},_={r:245,g:5,b:5,a:.3},C={r:0,g:234,b:226,a:1},T=1,R=1.51;function y(n,o,a){n.albedoColor=o,n.emissiveColor=o,n.alpha=a,a<.99?(n.alphaMode=b.ALPHA_COMBINE,n.transparencyMode=b.ALPHA_COMBINE,n.backFaceCulling=!1):(n.alphaMode=b.ALPHA_DISABLE,n.transparencyMode=b.ALPHA_DISABLE,n.backFaceCulling=!1)}function te(n){const o=n.getChildMeshes(),a=o[B];if(a&&a.material instanceof f){const s=new x(m.r/255,m.g/255,m.b/255);y(a.material,s,m.a)}const r=o[P];if(r&&r.material instanceof f){const s=new x(_.r/255,_.g/255,_.b/255),l=r.material;y(r.material,s,_.a);const h=o[F];h&&h.material instanceof f&&(h.material=l)}const e=o[k];if(e&&e.material instanceof f){const s=new x(C.r/255,C.g/255,C.b/255);y(e.material,s,C.a)}}const v=2e3,se="https://kaliatech.github.io/blog-20250700-3d-spin/babylon-prebuilt-viewer/ao-logo-3d-006c.glb";class ne{constructor(o){this._canvasEl=o}_engine=null;_logoMesh=null;_glLayer=null;_spinSpeed=1;_glowIntensity=3;_lastPointerDown=Date.now()-v;init(o,a){this._spinSpeed=o,this._glowIntensity=a;const r=new V(this._canvasEl,!0,{alpha:!0},!0);this._engine=r,window.addEventListener("resize",()=>{r.resize()});const e=new q(r);e.createDefaultEnvironment({createGround:!1,createSkybox:!1}),e.clearColor=new K(0,0,0,0);const s=new Y("glow",e);s.intensity=a,this._glLayer=s;const l=new J("Camera",D.ToRadians(90),D.ToRadians(90),2.2,new M(-.2,0,0),e);l.wheelDeltaPercentage=.01,l.attachControl(!0),new Z("light",new M(0,1,0),e),ee(se,e).then(i=>{if(i.meshes.length<1)throw new Error("No meshes found in the assset container.");this._logoMesh=i.meshes[0],te(this._logoMesh),i.addAllToScene()}),e.onPointerDown=()=>{this._lastPointerDown=Date.now()};let h=performance.now();return r.runRenderLoop(()=>{const i=performance.now(),S=(i-h)/1e3;if(h=i,e.render(),this._logoMesh&&Date.now()-this._lastPointerDown>v){const p=oe.RotationAxis(M.Up(),this._spinSpeed*S),g=this._logoMesh;g.position.x=.2,g.rotationQuaternion=g.rotationQuaternion?g.rotationQuaternion.multiply(p):p}}),e}dispose(){this._engine?.dispose()}updateGlowLayerIntensity(o){this._glowIntensity=o,this._glLayer&&(this._glLayer.intensity=this._glowIntensity)}updateSpinSpeed(o){this._spinSpeed=o}updateMaterialColor(o,a){if(!this._logoMesh)return;let r=[];switch(o){case"color1":r=[this._logoMesh.getChildMeshes()[B]];break;case"color2":r=[this._logoMesh.getChildMeshes()[P],this._logoMesh.getChildMeshes()[F]];break;case"color3":r=[this._logoMesh.getChildMeshes()[k]];break}const e=new x(a.r/255,a.g/255,a.b/255);for(const s of r){const l=s.material;if(!l||!(l instanceof f)){console.warn(`No valid material found for control ID: ${o}`);return}y(l,e,a.a||1)}}}const re="_colorControl_3odj7_1",ae="_colorButton_3odj7_9",le="_colorLabel_3odj7_23",E={colorControl:re,colorButton:ae,colorLabel:le};function N({color:n,label:o,onChange:a}){const[r,e]=u.useState(null),s=i=>{e(i.currentTarget)},l=()=>{e(null)},h=i=>{a(i.rgb)};return t.jsxs(w,{className:E.colorControl,children:[t.jsx(G,{onClick:s,className:E.colorButton,style:{backgroundColor:n?`rgb(${n.r}, ${n.g}, ${n.b})`:"#fff",opacity:Math.max(.1,n.a??1)}}),t.jsx(A,{variant:"caption",color:"text.secondary",className:E.colorLabel,children:o}),t.jsx(H,{open:!!r,anchorEl:r,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:t.jsx(Q,{color:n,onChange:h})})]})}function ie(){const n=u.useRef(null),o=u.useRef(null),[a,r]=u.useState(m),[e,s]=u.useState(_),[l,h]=u.useState(C),[i,S]=u.useState(T),[p,g]=u.useState(R),j=(c,d)=>{switch(d){case"color1":r(c);break;case"color2":s(c);break;case"color3":h(c);break;default:console.warn(`Unknown color control ID: ${d}`);return}o.current&&o.current.updateMaterialColor(d,c)};return u.useEffect(()=>{if(n.current)return o.current||(o.current=new ne(n.current),o.current.init(T,R)),()=>{}},[]),t.jsxs(t.Fragment,{children:[t.jsx(U,{}),t.jsxs(w,{className:"app-container",children:[t.jsx(w,{className:"viewer-panel",children:t.jsx("canvas",{id:"bjsCanvas",ref:n})}),t.jsxs($,{elevation:3,className:"config-panel",children:[t.jsx(A,{variant:"h6",className:"config-title",children:"Logo Configurator"}),t.jsxs(z,{spacing:2,children:[t.jsxs(I,{children:[t.jsx(L,{sx:{mb:1,fontWeight:500},children:"Colors"}),t.jsxs(w,{className:"color-controls",children:[t.jsx(N,{color:a,label:"Color 1",onChange:c=>j(c,"color1")}),t.jsx(N,{color:e,label:"Color 2",onChange:c=>j(c,"color2")}),t.jsx(N,{color:l,label:"Color 3",onChange:c=>j(c,"color3")})]})]}),t.jsx(W,{}),t.jsxs(I,{children:[t.jsxs(L,{sx:{mb:1,fontWeight:500},children:["Spin Speed: ",i]}),t.jsx(O,{value:i,onChange:(c,d)=>{o.current?.updateSpinSpeed(d),S(d)},min:0,max:10,step:.1,valueLabelDisplay:"auto"})]}),t.jsxs(I,{children:[t.jsxs(L,{sx:{mb:1,fontWeight:500},children:["Glow Intensity: ",p]}),t.jsx(O,{value:p,onChange:(c,d)=>{o.current?.updateGlowLayerIntensity(d),g(d)},min:0,max:3,step:.1,marks:!0,valueLabelDisplay:"auto"})]})]})]})]})]})}X.createRoot(document.getElementById("root")).render(t.jsx(u.StrictMode,{children:t.jsx(ie,{})}));
