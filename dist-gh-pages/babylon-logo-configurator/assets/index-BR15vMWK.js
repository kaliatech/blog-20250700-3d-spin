import{r as u,j as t,B as w,I as G,T as A,P as H,C as Q,a as U,b as $,S as z,F as j,c as L,D as W,d as O,e as X}from"./vendor-DuMzqJlV.js";import{P as f,C as y,a as b,E as V,S as q,b as K,G as Y,A as J,T as v,V as M,H as Z,L as ee,Q as oe}from"./vendor_babylonjs-CXKqtQaF.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function l(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(e){if(e.ep)return;e.ep=!0;const n=l(e);fetch(e.href,n)}})();const B=0,P=1,k=2,F=3,m={r:5,g:5,b:5,a:1},_={r:245,g:14,b:14,a:.8},C={r:0,g:173,b:168,a:.8},D=1,T=1;function x(r,o,l){r.albedoColor=o,r.emissiveColor=o,r.alpha=l,l<.99?(r.alphaMode=b.ALPHA_COMBINE,r.transparencyMode=b.ALPHA_COMBINE,r.backFaceCulling=!1):(r.alphaMode=b.ALPHA_DISABLE,r.transparencyMode=b.ALPHA_DISABLE,r.backFaceCulling=!1)}function te(r){const o=r.getChildMeshes(),l=o[B];if(l&&l.material instanceof f){const n=new y(m.r/255,m.g/255,m.b/255),s=l.material;s.metallic=.5,s.roughness=.2,x(l.material,n,m.a)}const a=o[P];if(a&&a.material instanceof f){const n=new y(_.r/255,_.g/255,_.b/255),s=a.material;s.metallic=.8,s.roughness=.2,s.emissiveIntensity=.5,x(a.material,n,_.a);const h=o[F];h&&h.material instanceof f&&(h.material=s)}const e=o[k];if(e&&e.material instanceof f){const n=new y(C.r/255,C.g/255,C.b/255),s=e.material;s.metallic=.8,s.roughness=.2,s.emissiveIntensity=.5,s.emissiveIntensity=.5,x(e.material,n,C.a)}}const R=2e3,se="https://kaliatech.github.io/blog-20250700-3d-spin/babylon-prebuilt-viewer/ao-logo-3d-006c.glb";class ne{constructor(o){this._canvasEl=o}_engine=null;_logoMesh=null;_glLayer=null;_spinSpeed=1;_glowIntensity=3;_lastPointerDown=Date.now()-R;init(o,l){this._spinSpeed=o,this._glowIntensity=l;const a=new V(this._canvasEl,!0,{alpha:!0},!0);this._engine=a,window.addEventListener("resize",()=>{a.resize()});const e=new q(a);e.createDefaultEnvironment({createGround:!1,createSkybox:!1}),e.clearColor=new K(0,0,0,0);const n=new Y("glow",e);n.intensity=l,this._glLayer=n;const s=new J("Camera",v.ToRadians(90),v.ToRadians(90),2.2,new M(-.2,0,0),e);s.wheelDeltaPercentage=.01,s.attachControl(!0),new Z("light",new M(0,1,0),e),ee(se,e).then(i=>{if(i.meshes.length<1)throw new Error("No meshes found in the assset container.");this._logoMesh=i.meshes[0],te(this._logoMesh),i.addAllToScene()}),e.onPointerDown=()=>{this._lastPointerDown=Date.now()};let h=performance.now();return a.runRenderLoop(()=>{const i=performance.now(),I=(i-h)/1e3;if(h=i,e.render(),this._logoMesh&&Date.now()-this._lastPointerDown>R){const p=oe.RotationAxis(M.Up(),this._spinSpeed*I),g=this._logoMesh;g.position.x=.2,g.rotationQuaternion=g.rotationQuaternion?g.rotationQuaternion.multiply(p):p}}),e}dispose(){this._engine?.dispose()}updateGlowLayerIntensity(o){this._glowIntensity=o,this._glLayer&&(this._glLayer.intensity=this._glowIntensity)}updateSpinSpeed(o){this._spinSpeed=o}updateMaterialColor(o,l){if(!this._logoMesh)return;let a=[];switch(o){case"color1":a=[this._logoMesh.getChildMeshes()[B]];break;case"color2":a=[this._logoMesh.getChildMeshes()[P],this._logoMesh.getChildMeshes()[F]];break;case"color3":a=[this._logoMesh.getChildMeshes()[k]];break}const e=new y(l.r/255,l.g/255,l.b/255);for(const n of a){const s=n.material;if(!s||!(s instanceof f)){console.warn(`No valid material found for control ID: ${o}`);return}x(s,e,l.a||1)}}}const re="_colorControl_3odj7_1",ae="_colorButton_3odj7_9",le="_colorLabel_3odj7_23",E={colorControl:re,colorButton:ae,colorLabel:le};function N({color:r,label:o,onChange:l}){const[a,e]=u.useState(null),n=i=>{e(i.currentTarget)},s=()=>{e(null)},h=i=>{l(i.rgb)};return t.jsxs(w,{className:E.colorControl,children:[t.jsx(G,{onClick:n,className:E.colorButton,style:{backgroundColor:r?`rgb(${r.r}, ${r.g}, ${r.b})`:"#fff",opacity:Math.max(.1,r.a??1)}}),t.jsx(A,{variant:"caption",color:"text.secondary",className:E.colorLabel,children:o}),t.jsx(H,{open:!!a,anchorEl:a,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:t.jsx(Q,{color:r,onChange:h})})]})}function ie(){const r=u.useRef(null),o=u.useRef(null),[l,a]=u.useState(m),[e,n]=u.useState(_),[s,h]=u.useState(C),[i,I]=u.useState(D),[p,g]=u.useState(T),S=(c,d)=>{switch(d){case"color1":a(c);break;case"color2":n(c);break;case"color3":h(c);break;default:console.warn(`Unknown color control ID: ${d}`);return}o.current&&o.current.updateMaterialColor(d,c)};return u.useEffect(()=>{if(r.current)return o.current||(o.current=new ne(r.current),o.current.init(D,T)),()=>{}},[]),t.jsxs(t.Fragment,{children:[t.jsx(U,{}),t.jsxs(w,{className:"app-container",children:[t.jsx(w,{className:"viewer-panel",children:t.jsx("canvas",{id:"bjsCanvas",ref:r})}),t.jsxs($,{elevation:3,className:"config-panel",children:[t.jsx(A,{variant:"h6",className:"config-title",children:"Logo Configurator"}),t.jsxs(z,{spacing:2,children:[t.jsxs(j,{children:[t.jsx(L,{sx:{mb:1,fontWeight:500},children:"Colors"}),t.jsxs(w,{className:"color-controls",children:[t.jsx(N,{color:l,label:"Color 1",onChange:c=>S(c,"color1")}),t.jsx(N,{color:e,label:"Color 2",onChange:c=>S(c,"color2")}),t.jsx(N,{color:s,label:"Color 3",onChange:c=>S(c,"color3")})]})]}),t.jsx(W,{}),t.jsxs(j,{children:[t.jsxs(L,{sx:{mb:1,fontWeight:500},children:["Spin Speed: ",i]}),t.jsx(O,{value:i,onChange:(c,d)=>{o.current?.updateSpinSpeed(d),I(d)},min:0,max:10,step:.1,valueLabelDisplay:"auto"})]}),t.jsxs(j,{children:[t.jsxs(L,{sx:{mb:1,fontWeight:500},children:["Glow Intensity: ",p]}),t.jsx(O,{value:p,onChange:(c,d)=>{o.current?.updateGlowLayerIntensity(d),g(d)},min:0,max:3,step:.1,marks:!0,valueLabelDisplay:"auto"})]})]})]})]})]})}X.createRoot(document.getElementById("root")).render(t.jsx(u.StrictMode,{children:t.jsx(ie,{})}));
